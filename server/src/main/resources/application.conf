ktor {
    deployment {
        port = 8080
        port = ${?PORT}
    }
    application {
        modules = [ ru.sber.cb.aichallenge_one.ApplicationKt.module ]
    }
}

gigachat {
    baseUrl = "https://gigachat.devices.sberbank.ru/api/v1"
    authUrl = "https://ngw.devices.sberbank.ru:9443/api/v2/oauth"
    clientId = ${?GIGACHAT_CLIENT_ID}
    clientSecret = ${?GIGACHAT_CLIENT_SECRET}
    scope = "GIGACHAT_API_PERS"
}

# OpenAI-compatible API configuration (optional)
# Supports OpenAI, Azure OpenAI, LocalAI, Ollama with OpenAI compatibility, etc.
openai {
    # Base URL for the API (e.g., "https://api.openai.com/v1" for OpenAI)
    baseUrl = "https://openrouter.ai/api/v1"

    # Model name (e.g., "gpt-4", "gpt-3.5-turbo", "gpt-4-turbo")
    model = ${?OPENAI_MODEL}
    # Top-p sampling parameter (optional, 0.0-1.0)
    topP = ${?OPENAI_TOP_P}
}

ollama {
  baseUrl = "http://localhost:11434"
  baseUrl = ${?OLLAMA_BASE_URL}
  model = "gemma3:1b"
  model = ${?OLLAMA_MODEL}
  timeout = 120000  # 2 minutes
  timeout = ${?OLLAMA_TIMEOUT}
  enableSummarization = false
  enableSummarization = ${?OLLAMA_ENABLE_SUMMARIZATION}
  enableTools = true
  enableTools = ${?OLLAMA_ENABLE_TOOLS}
  streamFlushInterval = 50
  streamFlushInterval = ${?OLLAMA_STREAM_FLUSH_INTERVAL}
}

database {
    url = "jdbc:postgresql://localhost:5432/aichallenge"
    url = ${?DATABASE_URL}
    driver = "org.postgresql.Driver"
    user = "aichallenge"
    user = ${?DATABASE_USER}
    password = "aichallenge"
    password = ${?DATABASE_PASSWORD}
    maxPoolSize = 10
}
