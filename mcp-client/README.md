# MCP Client - Model Context Protocol CLI

CLI-приложение для взаимодействия с MCP-сервером через официальный MCP Kotlin SDK.

## Описание

Этот модуль предоставляет клиентское приложение командной строки для подключения к MCP-серверу и запроса списка
доступных инструментов (tools). Использует официальный MCP SDK с SSE (Server-Sent Events) транспортом.

## Запуск

### Предварительные требования

1. **Запустите MCP-сервер** (в первом терминале):

```bash
.\gradlew.bat :mcp-server:run
```

Сервер должен работать на `http://localhost:8082`

2. **Дождитесь сообщения** о запуске сервера и установке SSE plugin

### Запуск CLI клиента

В новом терминале выполните:

```bash
.\gradlew.bat :mcp-client:run
```

## Что делает приложение

1. Создает MCP клиент с использованием официального SDK
2. Подключается к MCP-серверу через SSE на `http://localhost:8082/mcp`
3. Выполняет MCP handshake (инициализация)
4. Запрашивает список доступных инструментов через `listTools()`
5. Выводит информацию о каждом инструменте:
    - Название
    - Описание
    - Схема входных параметров (JSON Schema)

## Пример вывода

```
╔═══════════════════════════════════════════════════════════╗
║        MCP Client - Model Context Protocol CLI           ║
╚═══════════════════════════════════════════════════════════╝

Подключение к MCP-серверу на http://localhost:8082...

═══════════════════════════════════════════════════════════
Получен список доступных инструментов (tools):
═══════════════════════════════════════════════════════════

1. reverse
   Описание: Reverses the input string
   Схема входных данных:
   {"type":"object","properties":{"text":{"type":"string"}},"required":["text"]}

═══════════════════════════════════════════════════════════
Всего инструментов: 1
═══════════════════════════════════════════════════════════
```

## Технологии

- **Kotlin**: 2.2.21
- **MCP Kotlin SDK**: 0.8.1 (официальный SDK)
- **SSE Transport**: Server-Sent Events для real-time коммуникации
- **Kotlinx Serialization**: JSON serialization
- **Coroutines**: Асинхронная обработка

## Архитектура

### Компоненты

- `Application.kt` - главная точка входа CLI приложения
- `Client` - MCP SDK клиент для общения с сервером
- `SseClientTransport` - SSE транспорт для подключения к серверу
- `Implementation` - метаданные клиента (название, версия)

### Протокол

Клиент использует **MCP (Model Context Protocol)** поверх SSE:

1. **Инициализация**: Установка SSE соединения
2. **Handshake**: Обмен capabilities между клиентом и сервером
3. **Запросы**: JSON-RPC 2.0 через установленное соединение

SDK автоматически обрабатывает:

- Сериализацию/десериализацию JSON-RPC сообщений
- SSE event stream
- Управление соединением и ошибками

## Расширение функционала

Можно добавить:

- Вызов конкретного tool с параметрами
- Интерактивный режим (выбор tool из списка)
- Поддержка других MCP методов (resources/list, prompts/list)
- Сохранение результатов в файл
