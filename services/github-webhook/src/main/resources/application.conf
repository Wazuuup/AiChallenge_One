ktor {
  deployment {
    port = 8094
    port = ${?PORT}
  }
  application {
    modules = [ru.sber.cb.aichallenge_one.github.webhook.ApplicationKt.module]
  }
}

github {
  # GitHub Personal Access Token для API
  token = ${?GITHUB_TOKEN}
}

openrouter {
  # OpenRouter API key (shared с server)
  api_key = ${?OPENAI_API_KEY}
  base_url = "https://openrouter.ai/api/v1"
  base_url = ${?OPENAI_BASE_URL}

  # Review settings
  review_model = "gpt-oss-120b"
  review_model = ${?REVIEW_MODEL}

  review_temperature = 0.3
  review_temperature = ${?REVIEW_TEMPERATURE}

  review_max_tokens = 1000
  review_max_tokens = ${?REVIEW_MAX_TOKENS}

  review_timeout = 120000  # 2 minutes in milliseconds
  review_timeout = ${?REVIEW_TIMEOUT}
}

rag {
  api_url = "http://localhost:8091"
  api_url = ${?RAG_API_URL}

  search_limit = 5
  search_limit = ${?RAG_SEARCH_LIMIT}
}

mcp {
  github_reviewer_url = "http://localhost:8095"
  github_reviewer_url = ${?MCP_GITHUB_REVIEWER_URL}
}

webhook {
  # Максимальный размер diff для review
  max_diff_lines = 1000
  max_diff_lines = ${?WEBHOOK_MAX_DIFF_LINES}
}
