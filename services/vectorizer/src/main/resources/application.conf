ktor {
  deployment {
    port = 8090
    port = ${?PORT}
  }
  application {
    modules = [ru.sber.cb.aichallenge_one.vectorizer.ApplicationKt.module]
  }
}

database {
  url = "jdbc:postgresql://localhost:5433/vectordb"
  url = ${?DATABASE_URL}
  driver = "org.postgresql.Driver"
  user = "vectoruser"
  user = ${?DATABASE_USER}
  password = "vectorpass"
  password = ${?DATABASE_PASSWORD}
  maxPoolSize = 10
}

ollama {
  baseUrl = "http://localhost:11434"
  baseUrl = ${?OLLAMA_BASE_URL}
  model = "nomic-embed-text"
  model = ${?OLLAMA_MODEL}
}

# Repository vectorization configuration
repository {
  # Security: Whitelist allowed base directories (empty list = allow all)
  # Example: ["C:\\Users\\singe\\repos", "/home/user/projects"]
  allowedBasePaths = []
  allowedBasePaths = ${?REPO_ALLOWED_PATHS}

  # Resource limits
  maxFiles = 10000
  maxFiles = ${?REPO_MAX_FILES}

  maxFileSizeMb = 5
  maxFileSizeMb = ${?REPO_MAX_FILE_SIZE_MB}

  maxTotalSizeMb = 500
  maxTotalSizeMb = ${?REPO_MAX_TOTAL_SIZE_MB}

  maxDepth = 50
  maxDepth = ${?REPO_MAX_DEPTH}

  # Security scanning
  scanForSecrets = true
  scanForSecrets = ${?REPO_SCAN_FOR_SECRETS}

  skipFilesWithSecrets = true
  skipFilesWithSecrets = ${?REPO_SKIP_FILES_WITH_SECRETS}
}
